<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <script type="application/javascript" src='https://shiroimon.kithub.f5.si/js/theme-mode.js'></script>
    <link rel="stylesheet" href='https://shiroimon.kithub.f5.si/css/frameworks.min.css' />
    <link rel="stylesheet" href='https://shiroimon.kithub.f5.si/css/github.min.css' />
    <link rel="stylesheet" href='https://shiroimon.kithub.f5.si/css/github-style.css' />
    <link rel="stylesheet" href='https://shiroimon.kithub.f5.si/css/light.css' />
    <link rel="stylesheet" href='https://shiroimon.kithub.f5.si/css/dark.css' />
    <link rel="stylesheet" href='https://shiroimon.kithub.f5.si/css/syntax.css' />
    <title>[dbt] Seeking out basic understanding - Today I Learned | KitHub</title>
    
    <link rel="icon" type="image/x-icon" href='../../images/github-mark.png'>
    
    <meta name="theme-color" content="#1e2327">

    <link rel="stylesheet" href="https://shiroimon.kithub.f5.si/css/gist.css">
    <script type="text/javascript" src="https://shiroimon.kithub.f5.si/js/gist-dark-mode.js"></script>

    
    <meta name="description"
  content="âœ´ï¸ Wanna deepen my understanding by using my hands and referring to reference books." />
<meta name="keywords"
  content='blog' />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://shiroimon.kithub.f5.si/post/dbt_seeking_basic_understanding/" />


<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="[dbt] Seeking out basic understanding - Today I Learned | KitHub" />
<meta name="twitter:description"
  content="âœ´ï¸ Wanna deepen my understanding by using my hands and referring to reference books." />
<meta name="twitter:site" content="https://shiroimon.kithub.f5.si/" />
<meta name="twitter:creator" content="shiro" />
<meta name="twitter:image"
  content="https://shiroimon.kithub.f5.si/">


<meta property="og:type" content="article" />
<meta property="og:title" content="[dbt] Seeking out basic understanding - Today I Learned | KitHub">
<meta property="og:description"
  content="âœ´ï¸ Wanna deepen my understanding by using my hands and referring to reference books." />
<meta property="og:url" content="https://shiroimon.kithub.f5.si/post/dbt_seeking_basic_understanding/" />
<meta property="og:site_name" content="[dbt] Seeking out basic understanding" />
<meta property="og:image"
  content="https://shiroimon.kithub.f5.si/">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta property="article:published_time" content="2024-07-30 02:30:55 &#43;0900 JST" />











</head>


<body>
  <div style="position: relative">
  <header class="Header js-details-container Details px-3 px-md-4 px-lg-5 flex-wrap flex-md-nowrap open Details--on">
    <div class="Header-item mobile-none" style="margin-top: -4px; margin-bottom: -4px;">
      <a class="Header-link" href="https://shiroimon.kithub.f5.si/">
        <img class="octicon" height="32" width="32" src="../../images/github-mark-white.png">
      </a>
    </div>
    <div class="Header-item d-md-none">
      <button class="Header-link btn-link js-details-target" type="button"
        onclick="document.querySelector('#header-search').style.display = document.querySelector('#header-search').style.display == 'none'? 'block': 'none'">
        <svg height="24" class="octicon octicon-three-bars" viewBox="0 0 16 16" version="1.1" width="24">
          <path fill-rule="evenodd" d="M1 2.75A.75.75 0 011.75 2h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 2.75zm0 5A.75.75 0 011.75 7h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 7.75zM1.75 12a.75.75 0 100 1.5h12.5a.75.75 0 100-1.5H1.75z">
          </path>
        </svg>
      </button>
    </div>
    <div style="display: none;" id="header-search"
      class="Header-item Header-item--full flex-column flex-md-row width-full flex-order-2 flex-md-order-none mr-0 mr-md-3 mt-3 mt-md-0 Details-content--hidden-not-important d-md-flex">
      <div
        class="Header-search header-search flex-auto js-site-search position-relative flex-self-stretch flex-md-self-auto mb-3 mb-md-0 mr-0 mr-md-3 scoped-search site-scoped-search js-jump-to">
        <div class="position-relative">
          
          <form target="_blank" id="search-form" action="" accept-charset="UTF-8" method="get"
            autocomplete="off">
            <label
              class="Header-search-label form-control input-sm header-search-wrapper p-0 js-chromeless-input-container header-search-wrapper-jump-to position-relative d-flex flex-justify-between flex-items-center">
              <input type="text"
                class="Header-search-input form-control input-sm header-search-input jump-to-field js-jump-to-field js-site-search-focus js-site-search-field is-clearable"
                name="q" value="" placeholder="Search" autocomplete="off">
            </label>
          </form>
          
        </div>
      </div>
    </div>

    <div class="Header-item Header-item--full flex-justify-center d-md-none position-relative">
      <a class="Header-link " href="https://shiroimon.kithub.f5.si/">
        <img class="octicon octicon-mark-github v-align-middle" height="32" width="32" src="../../images/github-mark-white.png">
      </a>
    </div>
    <div class="Header-item" style="margin-right: 0;">
      <a href="javascript:void(0)" class="Header-link no-select" onclick="switchTheme()">
        <svg style="fill: var(--color-profile-color-modes-toggle-moon);" class="no-select" viewBox="0 0 16 16"
          version="1.1" width="16" height="16">
          <path fill-rule="evenodd" clip-rule="evenodd"
            d="M4.52208 7.71754C7.5782 7.71754 10.0557 5.24006 10.0557 2.18394C10.0557 1.93498 10.0392 1.68986 10.0074 1.44961C9.95801 1.07727 10.3495 0.771159 10.6474 0.99992C12.1153 2.12716 13.0615 3.89999 13.0615 5.89383C13.0615 9.29958 10.3006 12.0605 6.89485 12.0605C3.95334 12.0605 1.49286 10.001 0.876728 7.24527C0.794841 6.87902 1.23668 6.65289 1.55321 6.85451C2.41106 7.40095 3.4296 7.71754 4.52208 7.71754Z">
          </path>
        </svg>
      </a>
    </div>
  </header>
</div>

  <div id="search-result" class="container-lg px-3 new-discussion-timeline" style="display: none;">
</div>

  
<div class="application-main">
  <div>
<main>
    
    <div class="gisthead pagehead bg-gray-light pb-0 pt-3 mb-4">
    <div class="px-0">
    <div class="mb-3 d-flex px-3 px-md-3 px-lg-5">
    <div class="flex-auto min-width-0 width-fit mr-3">
    <div class="d-flex">
        
        <div class="d-none d-md-block">
            <a class="avatar mr-2 flex-shrink-0" href="https://shiroimon.kithub.f5.si/">
                <img class=" avatar-user"
                  src="../../images/avatar.png"
                  width="32"
                  height="32">
            </a>
        </div>
        
        <div class="d-flex flex-column">
            
            <h1 class="break-word f3 text-normal mb-md-0 mb-1">
                <span class="author"><a href="https://shiroimon.kithub.f5.si/"></a></span>
                <span class="path-divider">/</span>
                <strong class="css-truncate css-truncate-target mr-1" style="max-width: 410px"><a href="https://shiroimon.kithub.f5.si/post/dbt_seeking_basic_understanding/">[dbt] Seeking out basic understanding</a></strong>
            </h1>
            
            <div class="note m-0">
                Created <relative-time datetime="Tue, 30 Jul 2024 02:30:55 &#43;0900" class="no-wrap">Tue, 30 Jul 2024 02:30:55 &#43;0900</relative-time>
                
                <span class="path-divider">|</span>
                Modified <relative-time datetime="Mon, 05 Jan 2026 23:44:03 &#43;0900" class="no-wrap">Mon, 05 Jan 2026 23:44:03 &#43;0900</relative-time>
                
            </div>
        </div>
    </div>
    </div>
    </div>
    </div>
    </div>

    
    <div class="container-lg px-3 new-discussion-timeline">
    <div class="repository-content gist-content">
    <div>
        <div class="js-gist-file-update-container js-task-list-container file-box">
        <div id="file-pytest" class="file my-2">
        
        <div id="post-header" class="file-header d-flex flex-md-items-center flex-items-start sticky-header" style="z-index: 2">
        <div class="file-info d-flex flex-md-items-center flex-items-start flex-order-1 flex-auto">
            
            <div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1 mt-2 mt-md-0">
            <summary id="toc-toggle" onclick="clickToc()" class="btn btn-octicon m-0 mr-2 p-2">
                <svg aria-hidden="true" viewBox="0 0 16 16" class="octicon octicon-list-unordered" height="16" width="16">
                    <path fill-rule="evenodd"
                        d="M2 4a1 1 0 100-2 1 1 0 000 2zm3.75-1.5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zm0 5a.75.75 0 000 1.5h8.5a.75.75 0 000-1.5h-8.5zM3 8a1 1 0 11-2 0 1 1 0 012 0zm-1 6a1 1 0 100-2 1 1 0 000 2z">
                    </path>
                </svg>
            </summary>
            <details-menu class="SelectMenu" id="toc-details" style="display: none;">
                <div class="SelectMenu-modal rounded-3 mt-1" style="max-height: 340px;">
                    <div class="SelectMenu-list SelectMenu-list--borderless p-2" style="overscroll-behavior: contain;" id="toc-list"></div>
                </div>
            </details-menu>
            3592 Words
            <span class="path-divider">|</span>
            5 min
            </div>

            
            <div class="file-actions flex-order-2 pt-0">
                
                <div class="d-none d-md-flex">
                    
                    
                    
                    <a class="muted-link mr-3" href="../../tags/dbt">
                        <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                            <path fill-rule="evenodd"
                                d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                            </path>
                        </svg>
                        dbt
                    </a>
                    
                    
                    
                    <a class="muted-link mr-3" href="../../tags/sql">
                        <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                            <path fill-rule="evenodd"
                                d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                            </path>
                        </svg>
                        SQL
                    </a>
                    
                    
                    
                    <a class="muted-link mr-3" href="../../tags/yaml">
                        <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                            <path fill-rule="evenodd"
                                d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                            </path>
                        </svg>
                        YAML
                    </a>
                    
                    
                    
                    <a class="muted-link mr-3" href="../../tags/python">
                        <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                            <path fill-rule="evenodd"
                                d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                            </path>
                        </svg>
                        Python
                    </a>
                    
                    
                    
                    <a class="muted-link mr-3" href="../../tags/etl/elt">
                        <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                            <path fill-rule="evenodd"
                                d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                            </path>
                        </svg>
                        ETL/ELT
                    </a>
                    
                    
                    
                </div>
                
            </div>
        </div>
        </div>

        
        <div class="Box-body px-5 pb-5" style="z-index: 1">
            <article class="markdown-body entry-content container-lg"><!-- Icon Badge -->
<p><img src="https://img.shields.io/badge/-dbt-FF694B.svg?logo=dbt&amp;style=flat&amp;color=F0F8FF&amp;logoColor=FF694B" alt="dbt">
<img src="https://img.shields.io/badge/-YAML-CB171E.svg?logo=yaml&amp;style=flat&amp;color=F0F8FF&amp;logoColor=CB171E" alt="YAML">
<img src="https://img.shields.io/badge/-PostgreSQL-4169E1.svg?logo=postgresql&amp;style=flat&amp;color=F0F8FF&amp;logoColor=4169E1" alt="PostgreSQL">
<img src="https://img.shields.io/badge/-Docker-EEE.svg?logo=docker&amp;style=flat&amp;color=F0F8FF&amp;logoColor=" alt="Docker"></p>
<p><img src="https://github.com/sh16ma/gitpress/assets/150888300/d3b2fdbc-417f-4145-8f6b-d9e2ab58c483" alt="image"></p>
<h2 id="why">Why<a class="anchor" aria-hidden="true" href="#why"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> </h2>
<p><code>SSIA</code></p>
<h2 id="what">What<a class="anchor" aria-hidden="true" href="#what"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> </h2>
<h3 id="dbt-ã¨ã¯">dbt ã¨ã¯<a class="anchor" aria-hidden="true" href="#dbt-ã¨ã¯"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> </h3>
<p><a href="https://docs.getdbt.com/docs/introduction">What is dbt?</a> dbt</p>
<blockquote>
<p>dbtã¨ã¯ <code>data build tool</code> ã®ç•¥ã§ã€ãƒ‡ãƒ¼ã‚¿çµ±åˆã‚’è¡Œã†éš›ã®ãƒ—ãƒ­ã‚»ã‚¹ã§ã‚ã‚‹ELT(æŠ½å‡º, å¤‰æ›, æ ¼ç´)ã®ã†ã¡ <code>Transform(å¤‰æ›)</code> ã®å½¹å‰²ã‚’æ‹…ã†ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚
Transformã®ãƒ—ãƒ­ã‚»ã‚¹ã§ã¯ä¸€èˆ¬çš„ã«ãƒ‡ãƒ¼ã‚¿ã‚¦ã‚§ã‚¢ãƒã‚¦ã‚¹ãªã©ã«æŠ½å‡ºã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’ä¸‹æµã®åˆ†æãƒ„ãƒ¼ãƒ«ã‚„ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã§åˆ©ç”¨ã§ãã‚‹å½¢å¼ã«å¤‰æ›ãƒ»åŠ å·¥ã™ã‚‹å‡¦ç†ã‚’è¡Œã„ã¾ã™ã€‚
dbtã¯ã“ã®å·¥ç¨‹ã§å½¹ã«ç«‹ã¤æ§˜ã€…ãªæ©Ÿèƒ½ã‚’æä¾›ã—ã¦ãã‚Œã¾ã™ã€‚ <a href="https://www.isoroot.jp/blog/6054/">ref</a></p>
</blockquote>
<ul>
<li>Official
<ul>
<li><a href="https://www.getdbt.com/">https://www.getdbt.com/</a></li>
<li><a href="https://docs.getdbt.com/">https://docs.getdbt.com/</a></li>
<li><a href="https://github.com/dbt-labs/">https://github.com/dbt-labs/</a></li>
</ul>
</li>
<li>Community
<ul>
<li>ğŸ‡¯ğŸ‡µ dbt Developer Group(DDG) Tokyo - Japan dbt User Group</li>
<li><a href="https://dbt-ug.tokyo/">https://dbt-ug.tokyo/</a></li>
</ul>
<pre tabindex="0"><code>dbt-tokyoã¯dbtã®æ—¥æœ¬ã«ãŠã‘ã‚‹dbtã®æ™®åŠã¨ã€
dbtãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã¸ã®è²¢çŒ®ã‚’ç›®çš„ã«æ´»å‹•ã‚’ã—ã¦ã„ã¾ã™ã€‚
</code></pre></li>
<li>Production
<pre tabindex="0"><code>[dbt]
â”” 1.[dbt-core]       &lt;-Free
â”” 2.[dbt Cloud]
    â”” 1.[Developer]  &lt;-Free
    â”” 2.[Team]
    â”” 3.[Enterprise]
</code></pre><ol>
<li>dbt-core</li>
<li>dbt Cloud
<pre tabindex="0"><code>WebUIã‚’ç”¨ã„ã¦é–‹ç™ºãŒã§ãã‚‹ï¼
</code></pre></li>
</ol>
<ul>
<li>cf.
<ul>
<li><a href="https://www.getdbt.com/pricing">dbt Pricing Plans</a> dbt</li>
<li><a href="https://zenn.dev/dbt_tokyo/books/537de43829f3a0/viewer/setup">Chapter 02 dbt Cloudã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—</a> Zenn</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="hands-ondbt-core">Hands Onï¼ˆdbt-coreï¼‰<a class="anchor" aria-hidden="true" href="#hands-ondbt-core"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> </h3>
<pre><code>è©³ç´°ãªã¨ã¯å‚è€ƒã«ä¹—ã£ã¦ã„ã‚‹ã®ã§ã€ã“ã®è¾ºã‚’èª­ã‚“ã§æ‰‹ã‚’å‹•ã‹ã—ãŸéƒ¨åˆ†ã‚’æ»ã„æ‘˜ã‚€ã€‚
</code></pre>
<ul>
<li><a href="https://zenn.dev/foursue/books/31456a86de5bb4">dbt å…¥é–€</a> Zenn</li>
<li><a href="https://zenn.dev/dbt_tokyo/books/537de43829f3a0">dbtã§å§‹ã‚ã‚‹ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³æ§‹ç¯‰ã€œå…¥é–€ã‹ã‚‰å®Ÿè·µã€œ</a> Zenn</li>
<li><a href="https://zenn.dev/chameleon/books/6c85cfeab9f271">dbtãƒãƒ³ã‚ºã‚ªãƒ³</a> Zenn</li>
</ul>
<h4 id="å°å…¥ã‹ã‚‰å®Ÿè¡Œã¾ã§">å°å…¥ã‹ã‚‰å®Ÿè¡Œã¾ã§<a class="anchor" aria-hidden="true" href="#å°å…¥ã‹ã‚‰å®Ÿè¡Œã¾ã§"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> </h4>
<p><strong>[STEP1] âœ´ï¸ dbt å°å…¥</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1"># ä½œæ¥­å ´ç”¨æ„</span>
</span></span><span class="line"><span class="cl">$ mkdir -p sandbox/dbt_training <span class="p">|</span> <span class="nb">cd</span> dbt_training
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># venvä»®æƒ³ç’°å¢ƒã‚’ç”¨æ„</span>
</span></span><span class="line"><span class="cl">$ python3 -m venv venv
</span></span><span class="line"><span class="cl">$ <span class="nb">source</span> venv/bin/activate          <span class="c1"># ä»®æƒ³ç’°å¢ƒå®Ÿè¡Œ</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>venv<span class="o">)</span>$ pip install --upgrade pip   <span class="c1"># pipæ›´æ–°</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>venv<span class="o">)</span>$ pip install dbt-postgres    <span class="c1"># dbtã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>venv<span class="o">)</span>$ deactivate                  <span class="c1"># ä»®æƒ³ç’°å¢ƒåœæ­¢</span>
</span></span><span class="line"><span class="cl">$                                   <span class="c1"># ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã«æˆ»ã‚‹</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># dbtã«å¿…è¦ãªã‚‚ã®ã‚’æº–å‚™</span>
</span></span><span class="line"><span class="cl">$ <span class="nb">source</span> venv/bin/activate          <span class="c1"># å†åº¦ä»®æƒ³ç’°å¢ƒå®Ÿè¡Œ</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>venv<span class="o">)</span>$ dbt --version               <span class="c1"># dbtç’°å¢ƒãŒæ‰‹å…ƒã«ã‚ã‚‹ã‹ç¢ºèª</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>venv<span class="o">)</span>$ mkdir <span class="se">\ </span>                    <span class="c1"># å¿…è¦ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æº–å‚™</span>
</span></span><span class="line"><span class="cl">        models <span class="se">\
</span></span></span><span class="line"><span class="cl">        analysis <span class="se">\
</span></span></span><span class="line"><span class="cl">        tests <span class="se">\
</span></span></span><span class="line"><span class="cl">        seeds <span class="se">\
</span></span></span><span class="line"><span class="cl">        macros <span class="se">\
</span></span></span><span class="line"><span class="cl">        snapshots <span class="se">\
</span></span></span><span class="line"><span class="cl">        targetã€€
</span></span><span class="line"><span class="cl"><span class="o">(</span>venv<span class="o">)</span>$ touch dbt_project.ymlã€€     <span class="c1"># dbtè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆï¼ˆï¼Šï¼‘: å¾Œè¿°ã®YAMLãƒ•ã‚¡ã‚¤ãƒ«ï¼‰</span>
</span></span></code></pre></div><ul>
<li><code>*1</code>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml:dbt_project.yml" data-lang="yaml:dbt_project.yml"><span class="line"><span class="cl"><span class="nn">---</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;dbt_training&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">config-version</span><span class="p">:</span><span class="w"> </span><span class="m">2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;1.0.0&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">profile</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;dbt_training_dw&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">model-paths</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&#34;models&#34;</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">analysis-paths</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&#34;analysis&#34;</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">test-paths</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&#34;tests&#34;</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">seed-paths</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&#34;seeds&#34;</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">macro-paths</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&#34;macros&#34;</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">snapshot-paths</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&#34;snapshots&#34;</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">target-path</span><span class="p">:</span><span class="w"> </span><span class="s2">&#34;target&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">clean-targets</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="l">target, dbt_packages]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">models</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">dbt_training</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">         </span><span class="nt">example</span><span class="p">:</span><span class="w">
</span></span></span></code></pre></div><ul>
<li>YAMLãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­èº«ã®è©³ç´°èª¬æ˜ã¯<a href="https://zenn.dev/foursue/books/31456a86de5bb4/viewer/7fce02#%E5%90%84%E3%82%BF%E3%82%B0%E3%81%AE%E8%AA%AC%E6%98%8E">ã“ã“</a>ãŒã‚ã‹ã‚Šã‚„ã™ã„.</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1"># ä¸Šä½éšå±¤ã«ä¸å¯è¦–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ</span>
</span></span><span class="line"><span class="cl">$ mkdir .dbt <span class="p">|</span> <span class="nb">cd</span> .dbt
</span></span><span class="line"><span class="cl">$ touch profiles.yml  <span class="c1"># DWHæ¥ç¶šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆï¼ˆï¼Šï¼’: å¾Œè¿°ã®YAMLãƒ•ã‚¡ã‚¤ãƒ«ï¼‰</span>
</span></span></code></pre></div><ul>
<li><code>*2</code>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml:~/.dbt/profiles.yml" data-lang="yaml:~/.dbt/profiles.yml"><span class="line"><span class="cl"><span class="nn">---</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">dbt_training_dw</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">target</span><span class="p">:</span><span class="w"> </span><span class="l">dev</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">outputs</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">dev</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">postgres</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l">localhost</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">user</span><span class="p">:</span><span class="w"> </span><span class="l">admin</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l">admin</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">5432</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">dbname</span><span class="p">:</span><span class="w"> </span><span class="l">postgres</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">schema</span><span class="p">:</span><span class="w"> </span><span class="l">public</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">threads</span><span class="p">:</span><span class="w"> </span><span class="m">1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">keepalives_idle</span><span class="p">:</span><span class="w"> </span><span class="m">0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">connect_timeout</span><span class="p">:</span><span class="w"> </span><span class="m">10</span><span class="w">
</span></span></span></code></pre></div><ul>
<li>ä¸Šè¨˜ã¯ã€ŒPostgreSQLã€ã«æ¥ç¶šã•ã›ã‚‹è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆcf.<a href="https://docs.getdbt.com/docs/core/connect-data-platform/postgres-setup">å…¬å¼</a>ï¼‰ã€‚</li>
<li>dbt ã¯ DWH ã®æ¥ç¶šè¨­å®šã‚’ <code>~/.dbt/profiles.yml</code> ã«æ›¸ãã€‚</li>
<li><code>~/.dbt/profiles.yml</code> ã¯å„DWHæ¯ã«ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›¸ãã€‚
<ul>
<li>é¸å®šã™ã‚‹DWHã®ç¨®é¡(PostgreSQL, BigQuery, Snowflake &hellip;etc.) æ¯ã«ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ãŒã‚ã‚Šã€ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã”ã¨ã«è¨­å®šã®æ›¸ãæ–¹ãŒç•°ãªã‚‹.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>[STEP2] ğŸ˜ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆPostgreSQLï¼‰è¨­å®š</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1"># å†ã³ä»®è£…ç’°å¢ƒå†…ã«å…¥ã£ã¦DBï¼ˆä»Šå›ã¯PostgreSQLï¼‰ã‚’ç”¨æ„</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>venv<span class="o">)</span>$ touch docker-compose.yml <span class="p">|</span> vi docker-compose.yml
</span></span></code></pre></div><ul>
<li>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml:docker-compose.yml" data-lang="yaml:docker-compose.yml"><span class="line"><span class="cl"><span class="nn">---</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;3&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">services</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">postgres</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l">postgres:latest</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">restart</span><span class="p">:</span><span class="w"> </span><span class="l">always</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">ports</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="m">5432</span><span class="p">:</span><span class="m">5432</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">environment</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">POSTGRES_USER</span><span class="p">:</span><span class="w"> </span><span class="l">admin</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">POSTGRES_PASSWORD</span><span class="p">:</span><span class="w"> </span><span class="l">admin</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">volumes</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span>- <span class="l">./postgres:/var/lib/postgresql/data</span><span class="w">
</span></span></span></code></pre></div></li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1"># Dockerã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>venv<span class="o">)</span>$ã€€docker --version
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># gemã‚’æ–°è¦ã§å°å…¥ã™ã‚‹ã¨ãã«ã¯ã€ã¾ãšä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œ</span>
</span></span><span class="line"><span class="cl"><span class="c1"># cf. https://qiita.com/KenAra/items/f1976caa69468323c29d Qiita</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>venv<span class="o">)</span>$ docker-compose build
</span></span><span class="line"><span class="cl"><span class="o">(</span>venv<span class="o">)</span>$ docker-compose up -d d    <span class="c1"># Dockerèµ·å‹•</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>venv<span class="o">)</span>$ docker-compose stop       <span class="c1"># Dockeråœæ­¢</span>
</span></span></code></pre></div><ul>
<li>ã‚‚ã—ã“ã“ã§<code>Docker</code>ã§ã¤ã¾ã„ã¥ã„ãŸã‚‰ğŸ‹ <a href="https://gitpress.io/c/docker_/mw_docker">ã‚³ãƒãƒ³ãƒ‰å‚ç…§</a></li>
</ul>
<p><strong>[STEP3] âœ´ï¸ dbt å®Ÿè¡Œ</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="o">(</span>venv<span class="o">)</span>$ dbt run
</span></span></code></pre></div><pre><code>- â€»ãƒ¢ãƒ‡ãƒ«ä½œæˆã—ã¦ã„ãªã„ã‹ã‚‰, ã€Œ`WARNING`ã€å‡ºã¦ã„ã‚‹ãŒæ°—ã«ã›ãšâ—
- é€†ã«å®Ÿè¡Œå¾Œ `logs/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒã§ãã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã€‚
</code></pre>
<h4 id="ãƒ¢ãƒ‡ãƒªãƒ³ã‚°">ãƒ¢ãƒ‡ãƒªãƒ³ã‚°<a class="anchor" aria-hidden="true" href="#ãƒ¢ãƒ‡ãƒªãƒ³ã‚°"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> </h4>
<p><strong>[Step1] ğŸ˜ ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã®æº–å‚™</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1"># PostgreSQLãƒ­ã‚°ã‚¤ãƒ³</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>venv<span class="o">)</span>$ psql -U postgres
</span></span><span class="line"><span class="cl"><span class="nv">postgres</span><span class="o">=</span><span class="c1">#</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä½œæˆ</span>
</span></span><span class="line"><span class="cl"><span class="nv">postgres</span><span class="o">=</span><span class="c1"># \d                             # DBä¸€è¦§ç¢ºèª</span>
</span></span><span class="line"><span class="cl"><span class="nv">postgres</span><span class="o">=</span><span class="c1"># CREATE DATABASE dbt_training;  #</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ</span>
</span></span><span class="line"><span class="cl"><span class="nv">postgres</span><span class="o">=</span><span class="c1"># \cd dbt_training               # ä½œæˆã—ãŸDBã«ç§»å‹•</span>
</span></span><span class="line"><span class="cl"><span class="nv">dbt_training</span><span class="o">=</span><span class="c1"># CREATE SCHEMA raw;         # ã‚¹ã‚­ãƒ¼ãƒä½œæˆ</span>
</span></span><span class="line"><span class="cl"><span class="nv">dbt_training</span><span class="o">=</span><span class="c1"># \du                        # ãƒ­ãƒ¼ãƒ«ä¸€è¦§ç¢ºèª</span>
</span></span><span class="line"><span class="cl">    List of schemasã€€
</span></span><span class="line"><span class="cl">ã€€Name      <span class="p">|</span>  Owner
</span></span><span class="line"><span class="cl">------------+----------
</span></span><span class="line"><span class="cl">ã€€public    <span class="p">|</span> postgres
</span></span><span class="line"><span class="cl">ã€€raw       <span class="p">|</span> postgres
</span></span><span class="line"><span class="cl">    <span class="o">(</span><span class="m">2</span> rows<span class="o">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># å„ç¨®ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ</span>
</span></span><span class="line"><span class="cl"><span class="nv">dbt_training</span><span class="o">=</span><span class="c1">#</span>
</span></span><span class="line"><span class="cl">-- å¾“æ¥­å“¡ãƒ†ãƒ¼ãƒ–ãƒ«
</span></span><span class="line"><span class="cl">CREATE TABLE <span class="s2">&#34;dbt_training&#34;</span>.<span class="s2">&#34;raw&#34;</span>.<span class="s2">&#34;employees&#34;</span> <span class="o">(</span>
</span></span><span class="line"><span class="cl">  <span class="s2">&#34;employee_id&#34;</span> varchar<span class="o">(</span>256<span class="o">)</span>,
</span></span><span class="line"><span class="cl">  <span class="s2">&#34;first_name&#34;</span> varchar<span class="o">(</span>256<span class="o">)</span>,
</span></span><span class="line"><span class="cl">  <span class="s2">&#34;last_name&#34;</span> varchar<span class="o">(</span>256<span class="o">)</span>,
</span></span><span class="line"><span class="cl">  <span class="s2">&#34;email&#34;</span> varchar<span class="o">(</span>256<span class="o">)</span>,
</span></span><span class="line"><span class="cl">  <span class="s2">&#34;job_id&#34;</span> varchar<span class="o">(</span>256<span class="o">)</span>,
</span></span><span class="line"><span class="cl">  <span class="s2">&#34;loaded_at&#34;</span> timestamp
</span></span><span class="line"><span class="cl"><span class="o">)</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">dbt_training</span><span class="o">=</span><span class="c1">#</span>
</span></span><span class="line"><span class="cl">-- ãŠä»•äº‹ãƒ†ãƒ¼ãƒ–ãƒ«
</span></span><span class="line"><span class="cl">CREATE TABLE <span class="s2">&#34;dbt_training&#34;</span>.<span class="s2">&#34;raw&#34;</span>.<span class="s2">&#34;jobs&#34;</span> <span class="o">(</span>
</span></span><span class="line"><span class="cl">  <span class="s2">&#34;job_id&#34;</span> varchar<span class="o">(</span>256<span class="o">)</span>,
</span></span><span class="line"><span class="cl">  <span class="s2">&#34;job_title&#34;</span> varchar<span class="o">(</span>256<span class="o">)</span>,
</span></span><span class="line"><span class="cl">  <span class="s2">&#34;min_salary&#34;</span> INTEGER,
</span></span><span class="line"><span class="cl">  <span class="s2">&#34;max_salary&#34;</span> INTEGER,
</span></span><span class="line"><span class="cl">  <span class="s2">&#34;loaded_at&#34;</span> timestamp
</span></span><span class="line"><span class="cl"><span class="o">)</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">dbt_training</span><span class="o">=</span><span class="c1"># \dt myschema.* ã€€ã€€ã€€ã€€ã€€ã€€ã€€# ã‚¹ã‚­ãƒ¼ãƒå†…ãƒ†ãƒ¼ãƒ–ãƒ«ä¸€è¦§ç¢ºèª</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ãƒ‡ãƒ¼ã‚¿æ ¼ç´</span>
</span></span><span class="line"><span class="cl"><span class="nv">dbt_training</span><span class="o">=</span><span class="c1">#</span>
</span></span><span class="line"><span class="cl">-- å¾“æ¥­å“¡ãƒ†ãƒ¼ãƒ–ãƒ«ã¸ãƒ‡ãƒ¼ã‚¿ã‚’INSERT
</span></span><span class="line"><span class="cl">INSERT INTO <span class="s2">&#34;dbt_training&#34;</span>.<span class="s2">&#34;raw&#34;</span>.<span class="s2">&#34;employees&#34;</span> VALUES
</span></span><span class="line"><span class="cl">  <span class="o">(</span><span class="s1">&#39;101&#39;</span>,<span class="s1">&#39;taro&#39;</span>,<span class="s1">&#39;yamada&#39;</span>,<span class="s1">&#39;yamada@example.com&#39;</span>,<span class="s1">&#39;11&#39;</span>,<span class="s1">&#39;2022-03-16&#39;</span><span class="o">)</span>,
</span></span><span class="line"><span class="cl">  <span class="o">(</span><span class="s1">&#39;102&#39;</span>,<span class="s1">&#39;ziro&#39;</span>,<span class="s1">&#39;sato&#39;</span>,<span class="s1">&#39;satou@example.com&#39;</span>,<span class="s1">&#39;11&#39;</span>,<span class="s1">&#39;2022-03-16&#39;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">dbt_training</span><span class="o">=</span><span class="c1">#</span>
</span></span><span class="line"><span class="cl">-- ãŠä»•äº‹ãƒ†ãƒ¼ãƒ–ãƒ«ã¸ãƒ‡ãƒ¼ã‚¿ã‚’INSERT
</span></span><span class="line"><span class="cl">INSERT INTO <span class="s2">&#34;dbt_training&#34;</span>.<span class="s2">&#34;raw&#34;</span>.<span class="s2">&#34;jobs&#34;</span> VALUES
</span></span><span class="line"><span class="cl">  <span class="o">(</span><span class="s1">&#39;11&#39;</span>,<span class="s1">&#39;datascientist&#39;</span>,6000000,12000000,<span class="s1">&#39;2022-03-16&#39;</span><span class="o">)</span>,
</span></span><span class="line"><span class="cl">  <span class="o">(</span><span class="s1">&#39;12&#39;</span>,<span class="s1">&#39;dataengineer&#39;</span>,5000000,10000000,<span class="s1">&#39;2022-03-16&#39;</span><span class="o">)</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># PostgreSQLãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</span>
</span></span><span class="line"><span class="cl"><span class="nv">dbt_training</span><span class="o">=</span><span class="c1"># \q</span>
</span></span><span class="line"><span class="cl"><span class="nv">postgres</span><span class="o">=</span><span class="c1"># \q</span>
</span></span></code></pre></div><ul>
<li>cf. ğŸ˜ <a href="https://gitpress.io/c/postgresql/sql_postgre">PostgreSQL</a>(ã‚³ãƒãƒ³ãƒ‰ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹)</li>
</ul>
<p><strong>[Step2] âœ´ï¸ dbt ãƒ¢ãƒ‡ãƒ«ä½œæˆ</strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="o">(</span>venv<span class="o">)</span>$ touch models/employee_names.sql
</span></span></code></pre></div><ul>
<li>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql:employee_names.sql" data-lang="sql:employee_names.sql"><span class="line"><span class="cl"><span class="k">select</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="s2">&#34;employee_id&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">,</span><span class="w"> </span><span class="nf">concat</span><span class="p">(</span><span class="s2">&#34;first_name&#34;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;last_name&#34;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">full_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">from</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="s2">&#34;dbt_training&#34;</span><span class="p">.</span><span class="s2">&#34;raw&#34;</span><span class="p">.</span><span class="s2">&#34;employees&#34;</span><span class="w">
</span></span></span></code></pre></div><ul>
<li>cf. <a href="https://docs.getdbt.com/docs/build/sql-models">SQL models</a> dbt</li>
</ul>
</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="c1"># ãƒ¢ãƒ‡ãƒ«ã‚’ä½œæˆå¾Œã«ã€dbtå®Ÿè¡Œ</span>
</span></span><span class="line"><span class="cl"><span class="o">(</span>venv<span class="o">)</span>$ dbt run
</span></span><span class="line"><span class="cl">â€¦çœç•¥â€¦
</span></span><span class="line"><span class="cl"><span class="m">1</span> of <span class="m">1</span> OK created view model public.employee_names.............................. <span class="o">[</span>CREATE VIEW in 0.08s<span class="o">]</span>
</span></span></code></pre></div><ul>
<li>æœ€çµ‚çš„ã« <code>1 of 1 OK created view model</code> ã¨è¡¨ç¤ºã•ã‚Œã‚Œã°OKã€‚</li>
<li>ã‚³ã‚³ã§ã¯ã€ãƒ‡ãƒ•ã‚©ã®<code>view</code>ã®ãƒ¢ãƒ‡ãƒ«ãŒä½œæˆã•ã‚Œã‚‹ã€‚</li>
<li>PostgreSQL ã®ä¸­ã« <code>employee_names</code> ãƒ“ãƒ¥ãƒ¼ãŒç”Ÿæˆã•ã‚Œã¦ã„ã‚‹ã¯ãšã€‚</li>
</ul>
<p><strong>[Step3] âœ´ï¸ dbt ãƒ¢ãƒ‡ãƒ«ä½œæˆï¼ˆæ§˜ã€…ãªãƒ¢ãƒ‡ãƒ«ï¼šãƒãƒ†ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ç·¨ï¼‰</strong></p>
<p><a href="https://docs.getdbt.com/docs/build/materializations">Materializations</a> dbt</p>
<table>
  <thead>
      <tr>
          <th style="text-align: center">ç¨®é¡</th>
          <th style="text-align: left">ãƒ¢ãƒ‡ãƒ«</th>
          <th style="text-align: center">ãƒ‡ãƒ¼ã‚¿è¦æ¨¡</th>
          <th style="text-align: left">èª¬æ˜</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: center"><code>view</code></td>
          <td style="text-align: left">Viewã§ä½œæˆ</td>
          <td style="text-align: center">-</td>
          <td style="text-align: left"><code>æœªæŒ‡å®šã ã¨ãƒ‡ãƒ•ã‚©</code>ã€‚é«˜é€Ÿãƒ¢ãƒ‡ãƒ«æ§‹ç¯‰ï¼ˆãƒ‡ãƒ¼ã‚¿ç§»å‹•ãŒç™ºç”Ÿã—ãªã„ã‹ã‚‰ï¼‰ã€‚ ã§ã‚‚ <strong>view &lt; table</strong> ã§ã‚¯ã‚¨ãƒªãŒé…ã„ã€‚åˆæœŸæ§‹ç¯‰ã«å‘ã„ã¦ã„ã‚‹ã€‚</td>
      </tr>
      <tr>
          <td style="text-align: center"><code>table</code></td>
          <td style="text-align: left">Tableã§ä½œæˆ</td>
          <td style="text-align: center">å°è¦æ¨¡</td>
          <td style="text-align: left">å®Ÿè¡Œ(<code>$ dbt run</code>)ã®åº¦ã«ãƒ‡ãƒ¼ã‚¿å…¥ã‚Œç›´ã™. ãã®ç‚ºå°è¦æ¨¡ãƒ‡ãƒ¼ã‚¿ã«å‘ã„ã¦ã„ã‚‹ï¼ˆå¤§è¦æ¨¡ãƒ‡ãƒ¼ã‚¿ã ã¨éƒ½åº¦å…¥ã‚Œç›´ã—ã¯ã‚³ã‚¹ãƒˆã‚„å‡¦ç†æ™‚é–“é¢ã§å•é¡Œï¼‰ã€‚å‚ç…§å›æ•°ã®å¤šã„ã€ã‚¢ãƒ‰ãƒ›ãƒƒã‚¯ãªåˆ†æã‚„é›†è¨ˆå¾Œã®ãƒ¢ãƒ‡ãƒªãƒ³ã‚°ã«é©ã—ã¦ã„ã‚‹( <strong>view &lt; tablea</strong> ã§ã‚¯ã‚¨ãƒªé€Ÿã„ç‚º)</td>
      </tr>
      <tr>
          <td style="text-align: center"><code>incremental</code></td>
          <td style="text-align: left">Tableã§ä½œæˆ</td>
          <td style="text-align: center">å¤§è¦æ¨¡</td>
          <td style="text-align: left">å®Ÿè¡Œ(<code>$ dbt run</code>)ã®åº¦ã«ãƒ‡ãƒ¼ã‚¿å…¥ã‚Œç›´ã™(æ–°ã—ã„ãƒ‡ãƒ¼ã‚¿ã‚’Insertã¾ãŸã¯Updateã§åæ˜ )ã€‚<strong>table &lt; incremental</strong>ã§é€Ÿã„ã€‚ãŸã ã—ã€å·®åˆ†åæ˜ ã™ã‚‹ãŸã‚ã®è¨­å®šã‚’è¿½åŠ ã§è¡Œã†å¿…è¦ãŒã‚ã‚Šé¢å€’ã€‚</td>
      </tr>
      <tr>
          <td style="text-align: center"><code>ephemeral</code></td>
          <td style="text-align: left"><strong>CTE</strong> å¤‰æ›</td>
          <td style="text-align: center">-</td>
          <td style="text-align: left">DWHä¸Šã§ã¯æ§‹ç¯‰ã•ã‚Œãš, ephemeralãƒ¢ãƒ‡ãƒ«ã¯ä»–ã®ãƒ¢ãƒ‡ãƒ«ã‹ã‚‰å‚ç…§å¯. å†åˆ©ç”¨å¯èƒ½ãªãƒ¢ãƒ‡ãƒ«ã‚’ä½œã‚‹å ´åˆã«æœ‰åŠ¹.</td>
      </tr>
  </tbody>
</table>
<ul>
<li>é€Ÿã„é †ï¼š<code>view &lt; table &lt; incremental</code></li>
<li>ãƒãƒ†ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³(=Materializations)ã¯ã€<code>dbt_project.yml</code> ã‹ã€å€‹åˆ¥ã®ãƒ¢ãƒ‡ãƒ«å®šç¾©ã«ç›´æ¥æ›¸ãã“ã¨ã§è¨­å®šã§ãã‚‹ã€‚</li>
<li>ä¸€èˆ¬çš„ã«ã¯ <code>dbt_project.yml</code> ã§æ›¸ãã»ã†ãŒå€‹åˆ¥ã®ãƒ¢ãƒ‡ãƒ«ã«æ›¸ãã‚ˆã‚Šã‚‚ç®¡ç†ã®é¢ã§æœ‰åˆ©ã€‚</li>
<li>DWH ã«ã‚ˆã£ã¦ã¯ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã‚„ç‰¹æ®Šãªè¨­å®šã‚’è¡Œã„ãŸã„å ´åˆã«ã€å€‹åˆ¥ã®ãƒ¢ãƒ‡ãƒ«ã«å®šç¾©ã™ã‚‹ã»ã†ãŒè‰¯ã„å ´åˆã‚‚ã‚ã‚‹ã€‚ï¼ˆãƒ¡ãƒ«ãƒšã‚¤ã¯ã“ã‚Œï¼‰</li>
</ul>
<ol>
<li><code>Table</code> ã®ãƒ¢ãƒ‡ãƒ«ä½œæˆ
<ul>
<li>YAMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¿®æ­£</li>
<li>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml:dbt_project.yml" data-lang="yaml:dbt_project.yml"><span class="line"><span class="cl"><span class="w"> </span>---<span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="l">â€¦çœç•¥â€¦</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"> </span><span class="nt">models</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">   </span><span class="nt">dbt_training</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">     </span><span class="nt">materialized_dwh</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">       </span><span class="nt">+materialized</span><span class="p">:</span><span class="w"> </span><span class="l">table</span><span class="w">
</span></span></span></code></pre></div></li>
<li>SQLãƒ•ã‚¡ã‚¤ãƒ«ç§»å‹•
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="o">(</span>venv<span class="o">)</span>$ mkdir models/materialized_dwh
</span></span><span class="line"><span class="cl"><span class="o">(</span>venv<span class="o">)</span>$ mv models/employee_names.sql models/materialized_dwh/employee_names.sql
</span></span><span class="line"><span class="cl"><span class="o">(</span>venv<span class="o">)</span>$ dbt run
</span></span><span class="line"><span class="cl">â€¦çœç•¥â€¦
</span></span><span class="line"><span class="cl">15:39:34  Finished running <span class="m">1</span> table model in 0.34s.
</span></span><span class="line"><span class="cl">15:39:34
</span></span><span class="line"><span class="cl">15:39:34  Completed successfully
</span></span><span class="line"><span class="cl">15:39:34
</span></span><span class="line"><span class="cl">15:39:34  Done. <span class="nv">PASS</span><span class="o">=</span><span class="m">1</span> <span class="nv">WARN</span><span class="o">=</span><span class="m">0</span> <span class="nv">ERROR</span><span class="o">=</span><span class="m">0</span> <span class="nv">SKIP</span><span class="o">=</span><span class="m">0</span> <span class="nv">TOTAL</span><span class="o">=</span><span class="m">1</span>
</span></span></code></pre></div><ul>
<li><del>View</del> ã§ã¯ãªã <strong>Table</strong> ã®ãƒ¢ãƒ‡ãƒ«ãŒä½œæˆã•ã‚Œã¦ã„ã‚‹ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><code>incremental</code> ã®ãƒ¢ãƒ‡ãƒ«ä½œæˆ
<ul>
<li>SQLãƒ•ã‚¡ã‚¤ãƒ«ã«ç›´æ›¸ã
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql:models/materialized_dwh/employee_names.sql" data-lang="sql:models/materialized_dwh/employee_names.sql"><span class="line"><span class="cl"><span class="err">{{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nf">config</span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">materialized</span><span class="o">=</span><span class="s1">&#39;incremental&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="err">}}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">select</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="s2">&#34;employee_id&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">,</span><span class="w"> </span><span class="nf">concat</span><span class="p">(</span><span class="s2">&#34;first_name&#34;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="p">,</span><span class="w"> </span><span class="s2">&#34;last_name&#34;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">full_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">from</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="s2">&#34;dbt_training&#34;</span><span class="p">.</span><span class="s2">&#34;raw&#34;</span><span class="p">.</span><span class="s2">&#34;employees&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="err">{</span><span class="o">%</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nf">is_incremental</span><span class="p">()</span><span class="w"> </span><span class="o">%</span><span class="err">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">where</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="s2">&#34;employee_id&#34;</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="k">select</span><span class="w"> </span><span class="s2">&#34;employee_id&#34;</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="err">{{</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="err">}}</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="err">{</span><span class="o">%</span><span class="w"> </span><span class="n">endif</span><span class="w"> </span><span class="o">%</span><span class="err">}</span><span class="w">
</span></span></span></code></pre></div><ul>
<li>cf. <a href="https://docs.getdbt.com/docs/build/incremental-models">Incremental models</a> dbt</li>
</ul>
</li>
<li>dbt å®Ÿè¡Œ
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl"><span class="o">(</span>venv<span class="o">)</span>dbt_training % dbt run
</span></span><span class="line"><span class="cl">â€¦çœç•¥â€¦
</span></span><span class="line"><span class="cl">15:51:02  <span class="m">1</span> of <span class="m">1</span> OK created incremental model public.employee_names....................... <span class="o">[</span>INSERT <span class="m">0</span> <span class="m">2</span> in 0.17s<span class="o">]</span>
</span></span><span class="line"><span class="cl">15:51:02
</span></span><span class="line"><span class="cl">15:51:02  Finished running <span class="m">1</span> incremental model in 0.34s.
</span></span><span class="line"><span class="cl">15:51:02
</span></span><span class="line"><span class="cl">15:51:02  Completed successfully
</span></span><span class="line"><span class="cl">15:51:02
</span></span><span class="line"><span class="cl">15:51:02  Done. <span class="nv">PASS</span><span class="o">=</span><span class="m">1</span> <span class="nv">WARN</span><span class="o">=</span><span class="m">0</span> <span class="nv">ERROR</span><span class="o">=</span><span class="m">0</span> <span class="nv">SKIP</span><span class="o">=</span><span class="m">0</span> <span class="nv">TOTAL</span><span class="o">=</span><span class="m">1</span>
</span></span></code></pre></div><ul>
<li>incremental ãƒ¢ãƒ‡ãƒ«ã«ã‚ˆã£ã¦ã€INSERT ãŒ2è¡Œç™ºç”Ÿ.</li>
<li>â€» <code>whereå¥</code> ã§ã¯, æ—¢ã«è¿½åŠ æ¸ˆã¿ã® &ldquo;employee_id&rdquo; ã¯å«ã¾ã‚Œãªã„ã‚ˆã†ã«ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°(ã‚³ãƒ¬ã‚’ã—ãªã„ã¨å®Ÿè¡Œã®åº¦ã«å·®åˆ†æ›´æ–°ã§éƒ½åº¦è¿½åŠ (=é‡è¤‡ç™ºç”Ÿ)ã•ã›ã¦ã—ã¾ã†å±é™ºã‚ã‚Š.)</li>
<li>â€» <code>is_incremental()</code>ã¯ãƒã‚¯ãƒ­ã§, ãƒ¢ãƒ‡ãƒ«ã®ãƒãƒ†ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ãŒ <strong>incremental</strong> ã®å ´åˆã« <strong>true</strong> è¿”ã™ã€‚</li>
<li>â€» <code>{% if æ¡ä»¶ %} ~ {% endif %}</code> ã¯ã€<strong>jinja</strong> ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ©Ÿèƒ½ã§æ¼”ç®—å­ã‚’ä½¿ãˆã‚‹ã€‚</li>
<li>â€» <code>{{ this }}</code>ã¯ã€<strong>jinja</strong> ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ©Ÿèƒ½ã§å¤‰æ•°ã‚’ä½¿ãˆã‚‹(ãƒ¢ãƒ‡ãƒ«è‡ªèº«ã®ãƒ†ãƒ¼ãƒ–ãƒ«åã¾ãŸã¯ã€ãƒ“ãƒ¥ãƒ¼å)ã€‚</li>
</ul>
</li>
</ul>
</li>
</ol>
<h4 id="ã‚«ã‚¹ã‚¿ãƒ ãƒ¢ãƒ‡ãƒªãƒ³ã‚°">ã‚«ã‚¹ã‚¿ãƒ ãƒ¢ãƒ‡ãƒªãƒ³ã‚°<a class="anchor" aria-hidden="true" href="#ã‚«ã‚¹ã‚¿ãƒ ãƒ¢ãƒ‡ãƒªãƒ³ã‚°"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> </h4>
<p>ã‚¨ã‚¤ãƒªã‚¢ã‚¹æ©Ÿèƒ½
cf. <a href="https://docs.getdbt.com/docs/build/custom-aliases">Custom aliases</a></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="c1">-- hogehoge.sql
</span></span></span><span class="line"><span class="cl"><span class="err">{{</span><span class="w"> </span><span class="n">config</span><span class="p">(</span><span class="k">alias</span><span class="o">=</span><span class="s1">&#39;fugafuga&#39;</span><span class="p">)</span><span class="w"> </span><span class="err">}}</span><span class="w">
</span></span></span></code></pre></div><ul>
<li>ãƒ¢ãƒ‡ãƒ«å(ãƒ“ãƒ¥ãƒ¼å)ã¯<code>hogehoge</code>. ä¸€æ–¹DBã«ä½œæˆã•ã‚Œã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«åã¯<code>fugafuga</code>.</li>
</ul>
<p>ã‚«ã‚¹ã‚¿ãƒ ã‚¹ã‚­ãƒ¼ãƒæ©Ÿèƒ½
cf. <a href="https://docs.getdbt.com/docs/build/custom-schemas">Custom schemas</a></p>
<ol>
<li>åˆ©ç”¨ã‚·ãƒ¼ãƒ³
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="c1">-- hogehoge.sql
</span></span></span><span class="line"><span class="cl"><span class="err">{{</span><span class="w"> </span><span class="n">config</span><span class="p">(</span><span class="k">schema</span><span class="o">=</span><span class="s1">&#39;piyopiyo&#39;</span><span class="p">)</span><span class="w"> </span><span class="err">}}</span><span class="w">
</span></span></span></code></pre></div>ã“ã®ã‚ˆã†ã«ä½œã‚‰ã‚Œã‚‹=&gt; <code>public_piyopiyo</code></li>
<li>åˆ©ç”¨ã‚·ãƒ¼ãƒ³
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="c1">-- hogehoge.sql
</span></span></span><span class="line"><span class="cl"><span class="err">{{</span><span class="w"> </span><span class="n">config</span><span class="p">(</span><span class="k">alias</span><span class="o">=</span><span class="s1">&#39;fugafuga&#39;</span><span class="p">,</span><span class="w"> </span><span class="k">schema</span><span class="o">=</span><span class="s1">&#39;piyopiyo&#39;</span><span class="p">)</span><span class="w"> </span><span class="err">}}</span><span class="w">
</span></span></span></code></pre></div>ã“ã®ã‚ˆã†ã«ä½œã‚‰ã‚Œã‚‹=&gt; <code>public_piyopiyo.fugafuga</code></li>
<li>åˆ©ç”¨ã‚·ãƒ¼ãƒ³
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml" data-lang="yaml"><span class="line"><span class="cl"><span class="nn">---</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">models</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="nt">hoge_project</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="nt">piyo</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">+schema</span><span class="p">:</span><span class="w"> </span><span class="l">piyopiyo</span><span class="w">
</span></span></span></code></pre></div><code>models/piyo</code> ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã®ãƒ¢ãƒ‡ãƒ«ã¯ <code>&lt;target_shema&gt;_piyopiyo</code> ã‚¹ã‚­ãƒ¼ãƒã«ä¿å­˜ã§ãã‚‹.</li>
</ol>
<p>ã‚«ã‚¹ã‚¿ãƒ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ©Ÿèƒ½
cf. <a href="https://docs.getdbt.com/docs/build/custom-databases">Custom databases</a></p>
<p>å¤‰æ•°æ©Ÿèƒ½
cf. <a href="https://docs.getdbt.com/docs/build/project-variables">Project variables</a></p>
<h4 id="ãƒ†ã‚¹ãƒˆ">ãƒ†ã‚¹ãƒˆ<a class="anchor" aria-hidden="true" href="#ãƒ†ã‚¹ãƒˆ"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> </h4>
<p>eg.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">$ dbt <span class="nb">test</span> <span class="se">\
</span></span></span><span class="line"><span class="cl">    --profiles-dir ./profiles <span class="se">\
</span></span></span><span class="line"><span class="cl">    --vars <span class="s1">&#39;$(cat ./config/local/vars.yml)&#39;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl">    --select company_hoge_jp__bigquery_resource__jobs_url_daily_extract_of_connectedsheet
</span></span></code></pre></div><p>å®Ÿå‹™ã§ã¯ã€ä¸Šè¨˜ã®ã‚ˆã«å˜ã« <code>test</code> ã‚’å®Ÿæ–½ã™ã‚‹ã®ã§ã¯ãªãã€Optionsã‚’ä»˜ã—ã¦æ…é‡ã«è¡Œã£ã¦ã„ãŸã€‚</p>
<p><strong>ãƒ†ã‚¹ãƒˆæ‰‹æ³•</strong></p>
<ol>
<li>Singular data tests <a href="https://docs.getdbt.com/docs/build/data-tests#singular-data-tests">cf.</a> (å˜ä¸€ãƒ†ã‚¹ãƒˆ)</li>
<li>Generic data tests <a href="https://docs.getdbt.com/docs/build/data-tests#generic-data-tests">cf.</a> (æ±ç”¨ãƒ†ã‚¹ãƒˆ)</li>
</ol>
<p>[æ‰‹æ³•1] Singular data testsï¼ˆå˜ä¸€ãƒ†ã‚¹ãƒˆï¼‰</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql:tests/always_fail_test.sql" data-lang="sql:tests/always_fail_test.sql"><span class="line"><span class="cl"><span class="k">select</span><span class="w"> </span><span class="n">id</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">from</span><span class="w"> </span><span class="n">hoge</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="k">where</span><span class="w"> </span><span class="no">true</span><span class="w">
</span></span></span></code></pre></div><p>[æ‰‹æ³•2] Generic data testsï¼ˆæ±ç”¨ãƒ†ã‚¹ãƒˆï¼‰</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-yaml:models/schema.yml" data-lang="yaml:models/schema.yml"><span class="line"><span class="cl"><span class="nn">---</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="m">2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="nt">models</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">model_name_hoge</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="nt">columns</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">fuga</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;fuga is fuga.&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">tests</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span>- <span class="l">unique</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span>- <span class="l">not_null</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span>- <span class="nt">accepted_values</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">values</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s1">&#39;hoge&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;fuga&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;piyo&#39;</span><span class="p">]</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span>- <span class="nt">relationships</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">to</span><span class="p">:</span><span class="w"> </span><span class="l">ref(&#39;other_model_name&#39;)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="nt">field</span><span class="p">:</span><span class="w"> </span><span class="l">id</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span>- <span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">fuga2</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;fuga2 is fuga2...&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">tests</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span>- <span class="l">my_not_null</span><span class="w">
</span></span></span></code></pre></div><p>cf. <a href="https://docs.getdbt.com/reference/model-properties">Model properties</a> dbt</p>
<h5 id="2-1-dbt-ãŒç”¨æ„ã—ã¦ãã‚Œã¦ã„ã‚‹ãƒ†ã‚¹ãƒˆ">2-1. dbt ãŒç”¨æ„ã—ã¦ãã‚Œã¦ã„ã‚‹ãƒ†ã‚¹ãƒˆ<a class="anchor" aria-hidden="true" href="#2-1-dbt-ãŒç”¨æ„ã—ã¦ãã‚Œã¦ã„ã‚‹ãƒ†ã‚¹ãƒˆ"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> </h5>
<table>
  <thead>
      <tr>
          <th style="text-align: left">ï¾ƒï½½ï¾„é …ç›®</th>
          <th style="text-align: left">æŒ‡å®šã•ã‚ŒãŸï½¶ï¾—ï¾‘ã«å¯¾ã—ã¦</th>
          <th style="text-align: left">query</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left"><code>- unique</code></td>
          <td style="text-align: left">ãƒ‡ãƒ¼ã‚¿ãŒå…¨ã¦ãƒ¦ãƒ‹ãƒ¼ã‚¯å€¤ã§ã‚ã‚‹ã“ã¨ã‚’ï¾ƒï½½ï¾„</td>
          <td style="text-align: left">distinct</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>- not_null</code></td>
          <td style="text-align: left">null ã‚’å«ã¾ãªã„ã“ã¨ã‚’ï¾ƒï½½ï¾„</td>
          <td style="text-align: left">is not null</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>- accepted_values</code></td>
          <td style="text-align: left">æŒ‡å®šã•ã‚ŒãŸå€¤ä»¥å¤–ã‚’å«ã¾ãªã„ã“ã¨ã‚’ï¾ƒï½½ï¾„</td>
          <td style="text-align: left">not in</td>
      </tr>
      <tr>
          <td style="text-align: left"><code>- relationships</code></td>
          <td style="text-align: left">ã€Œto:ã€ ã«æŒ‡å®šã•ã‚ŒãŸãƒ¢ãƒ‡ãƒ«ã® field ã«æŒ‡å®šã•ã‚ŒãŸã‚«ãƒ©ãƒ ã«å«ã¾ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ï¾ƒï½½ï¾„</td>
          <td style="text-align: left">exsits</td>
      </tr>
  </tbody>
</table>
<h5 id="2-2-ç‹¬è‡ªã«çµ„ã¿è¾¼ã‚ã‚‹ãƒ†ã‚¹ãƒˆcostumgeneric">2-2. ç‹¬è‡ªã«çµ„ã¿è¾¼ã‚ã‚‹ãƒ†ã‚¹ãƒˆ(CostumGeneric)<a class="anchor" aria-hidden="true" href="#2-2-ç‹¬è‡ªã«çµ„ã¿è¾¼ã‚ã‚‹ãƒ†ã‚¹ãƒˆcostumgeneric"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> </h5>
<ol>
<li>
<p>ãƒ†ã‚¹ãƒˆã‚’è¨˜è¿°</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql:tests/generic/hoge.sql" data-lang="sql:tests/generic/hoge.sql"><span class="line"><span class="cl"><span class="err">{</span><span class="o">%</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="nf">my_not_null</span><span class="p">(</span><span class="n">model</span><span class="p">,</span><span class="w"> </span><span class="n">column_name</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="err">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">from</span><span class="w"> </span><span class="err">{{</span><span class="w"> </span><span class="n">model</span><span class="w"> </span><span class="err">}}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">where</span><span class="w"> </span><span class="err">{{</span><span class="w"> </span><span class="n">column_name</span><span class="w"> </span><span class="err">}}</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="no">null</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="err">{</span><span class="o">%</span><span class="w"> </span><span class="n">endtest</span><span class="w"> </span><span class="o">%</span><span class="err">}</span><span class="w">
</span></span></span></code></pre></div></li>
<li>
<p><code>$ dbt test</code></p>
</li>
<li>
<p><code>target/compiled/</code> ã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã•ã‚ŒãŸSQLãŒæŠ½å‡ºã•ã‚Œã¦ã„ã‚‹ã€‚</p>
<p>cf. <a href="https://docs.getdbt.com/best-practices/writing-custom-generic-tests">Writing custom generic data tests</a> dbt</p>
</li>
</ol>
<h3 id="ãƒ†ã‚¹ãƒˆæ‰‹æ³•å°æŠ€">ãƒ†ã‚¹ãƒˆæ‰‹æ³•ï¼ˆå°æŠ€ï¼‰<a class="anchor" aria-hidden="true" href="#ãƒ†ã‚¹ãƒˆæ‰‹æ³•å°æŠ€"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> </h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sh" data-lang="sh"><span class="line"><span class="cl">$ dbt <span class="nb">test</span> --store-failures
</span></span></code></pre></div><p>ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã—ãŸã¨ãã«å¤±æ•—ã—ãŸãƒ†ã‚¹ãƒˆã«ã‚ˆã£ã¦æ¡ä»¶ã‚’æº€ãŸã•ãªã‹ã£ãŸè¡Œã‚’ä¿å­˜ã™ã‚‹äº‹ãŒå‡ºæ¥ã‚‹ã€‚</p>
<h3 id="ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½">ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½<a class="anchor" aria-hidden="true" href="#ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ©Ÿèƒ½"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> </h3>
<h3 id="ã‚½ãƒ¼ã‚¹æ©Ÿèƒ½">ã‚½ãƒ¼ã‚¹æ©Ÿèƒ½<a class="anchor" aria-hidden="true" href="#ã‚½ãƒ¼ã‚¹æ©Ÿèƒ½"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> </h3>
<h2 id="ossæ´»å‹•">OSSæ´»å‹•<a class="anchor" aria-hidden="true" href="#ossæ´»å‹•"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> </h2>
<pre tabindex="0"><code>è²¢çŒ®ã—ãŸã„äººã¯ã‚ˆã‚Šå­¦ç¿’ã—ã¦ã€ä¸–ã®ãŸã‚äººã®ãŸã‚ã€OSSæ´»å‹•ã«å‚åŠ ã—ã¦ã¿ã‚‹ï¼ˆã¦ã‹ã€å‚åŠ ã—ãŸã„ï¼ï¼‰
</code></pre><ul>
<li>cf.
<ul>
<li><a href="https://zenn.dev/daizamurai/books/87f9727b0f7ee1">dbt-coreã®OSSæ´»å‹•ã“ã¨ã¯ã˜ã‚</a> Zeen</li>
</ul>
</li>
</ul>
<h2 id="ref">Ref.<a class="anchor" aria-hidden="true" href="#ref"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> </h2>
<ul>
<li>
<p><a href="https://www.isoroot.jp/blog/6054/">ã¯ã˜ã‚ã¦ç†è§£ã™ã‚‹dbt</a> isoroot</p>
</li>
<li>
<p><a href="https://docs.getdbt.com/docs/introduction">What is dbt?</a> dbt</p>
</li>
<li>
<p><a href="https://zenn.dev/foursue/books/31456a86de5bb4">dbt å…¥é–€</a> Zenn</p>
</li>
<li>
<p><a href="https://zenn.dev/dbt_tokyo/books/537de43829f3a0">dbtã§å§‹ã‚ã‚‹ãƒ‡ãƒ¼ã‚¿ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³æ§‹ç¯‰ã€œå…¥é–€ã‹ã‚‰å®Ÿè·µã€œ</a> Zenn</p>
</li>
<li>
<p><a href="https://www.isoroot.jp/blog/6054/">ã¯ã˜ã‚ã¦ç†è§£ã™ã‚‹dbt</a> isoroot</p>
</li>
<li>
<p><a href="https://zenn.dev/foursue/books/31456a86de5bb4/viewer/6037e5">ãƒ¢ãƒ‡ãƒ«ã‚’ä½œã‚ã†</a> Zenn</p>
</li>
<li>
<p><a href="https://zenn.dev/foursue/books/31456a86de5bb4/viewer/4201af#%E3%83%87%E3%83%BC%E3%82%BF%E3%83%99%E3%83%BC%E3%82%B9%E3%82%92%E6%8C%87%E5%AE%9A%E3%81%99%E3%82%8B%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%A0%E3%83%87%E3%83%BC%E3%82%BF%E3%83%99%E3%83%BC%E3%82%B9%E6%A9%9F%E8%83%BD">ãƒ¢ãƒ‡ãƒ«ã‚’ã‚‚ã†å°‘ã—æ·±ãä½¿ãŠã†</a> Zenn</p>
</li>
<li>
<p><a href="https://dev.classmethod.jp/articles/dbt-core-run-via-github-actions/">dbt-coreã§é–‹ç™ºã—ãŸModelã‚’GitHub Actionsã§å®šæœŸå®Ÿè¡Œã—ã¦ã¿ãŸ</a> DevelopersIO</p>
</li>
<li>
<p><a href="https://dev.classmethod.jp/articles/20220223-dbt-cloud-cli-diff/">dbt Cloudã¨dbt-core (CLI)ã®é•ã„ã‚’æ•´ç†ã—ã¦ã¿ãŸ</a> DevelopersIO</p>
</li>
<li>
<p><a href="https://dev.classmethod.jp/articles/differences-between-dbt-core-and-dbt-cloud/">dbt Coreã¨dbt Cloudã®é–¢ä¿‚æ€§ãƒ»é•ã„ãªã©ã«ã¤ã„ã¦ã¾ã¨ã‚ã¦ã¿ãŸ #dbt</a> DevelopersIO</p>
</li>
<li>
<p><a href="https://docs.getdbt.com/reference/commands/test">About dbt test command</a> dbt</p>
</li>
<li>
<p><a href="https://docs.getdbt.com/docs/build/data-tests#generic-data-tests">Add data tests to your DAG</a> dbt</p>
</li>
<li>
<p><a href="https://docs.getdbt.com/reference/data-test-configs">Data test configurations</a> -dbt</p>
</li>
<li>
<p><a href="https://zenn.dev/foursue/books/31456a86de5bb4/viewer/5efa91">ãƒ†ã‚¹ãƒˆ(test)ã‚’è¡ŒãŠã†</a> Zenn</p>
</li>
<li>
<p><a href="https://qiita.com/manabian/items/67af7e4476d436aded77">ãƒ‡ãƒ¼ã‚¿ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ç•Œéšˆã§è©±é¡Œã®dbtï¼ˆdata build toolï¼‰ã®ã¾ã¨ã‚</a> Qiita</p>
</li>
<li>
<p><a href="https://zenn.dev/dbt_tokyo/books/537de43829f3a0/viewer/what_dbt">dbtã¨ã¯ï¼Ÿ</a> Zenn</p>
</li>
<li>
<p><a href="https://zenn.dev/foursue/books/31456a86de5bb4/viewer/04bca4">dbt ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å§‹ã‚æ–¹</a> - Zenn (æ‘é•·)</p>
</li>
<li>
<p><a href="https://www.aggua.io/blog/what-is-dbt-why-use-it">What Is DBT and Why You Should Use It?</a> aggua</p>
</li>
<li>
<p><a href="https://techblog.zozo.com/entry/dbt-adoption">dbtå°å…¥ã«ã‚ˆã‚‹ãƒ‡ãƒ¼ã‚¿ãƒãƒ¼ãƒˆæ•´å‚™</a> zozo</p>
</li>
</ul>
</article>
        </div>
        </div>
        </div>
    </div>
        
        
        
        <div class="Box mt-3 position-relative">
        <div class="Box-body px-5 pb-5">
            <article class="markdown-body entry-content container-lg">
                <h2>See Also</h2>
                <ul class="mt-2">
                    
                    <li class="p-1">
                        <div>
                            <a href="../../post/bigquery_structured_data_processing_100/">[BigQuery] Structured data processing 100&#39;s</a>
                            <time datetime="2024-07-26 04:23" class="no-wrap text-small ml-1">(2024-07-26 04:23)</time>
                        </div>
                        <div class="text-small text-gray mb-1 mt-1">Tried using SQL to learn the basics of data science.</div>
                    </li>
                    
                    <li class="p-1">
                        <div>
                            <a href="../../post/bigquery_data_analysis_on_cte/">[BigQuery] CTEs in data analyisis</a>
                            <time datetime="2024-07-20 16:13" class="no-wrap text-small ml-1">(2024-07-20 16:13)</time>
                        </div>
                        <div class="text-small text-gray mb-1 mt-1">Things to keep in mind when analyzing data using SQL.</div>
                    </li>
                    
                </ul>
            </article>
        </div>
        </div>
        
    </div>
    </div>
</main>
</div>

<script type="application/javascript" src='https://shiroimon.kithub.f5.si/js/toc.js'></script>
<link rel="stylesheet" href='https://shiroimon.kithub.f5.si/css/toc.css' />


<script
    src='https://shiroimon.kithub.f5.si/js/syntax-highlight-title.js'
    crossorigin="anonymous"
    type="application/javascript">
</script>
<link rel="stylesheet" href="../../css/syntax-highlight-title.css">









<script src="https://unpkg.com/mermaid@11/dist/mermaid.min.js" crossorigin="anonymous"></script>
<script>


(function () {
    function transformMermaidCodeBlocks() {
        var codeBlocks = document.querySelectorAll('pre > code.language-mermaid, code.language-mermaid');
        codeBlocks.forEach(function (code) {
            var pre = code.parentElement && code.parentElement.tagName.toLowerCase() === 'pre' ? code.parentElement : code;
            var container = document.createElement('div');
            container.className = 'mermaid';
            container.textContent = code.textContent;
            pre.replaceWith(container);
        });
    }
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', transformMermaidCodeBlocks);
    } else {
        transformMermaidCodeBlocks();
    }
    
    if (window.mermaid) {
        window.mermaid.initialize({ startOnLoad: true, theme: 'dark' });
    }
})();
</script>




  
  
  
  
  
  
    
      
    
  
<div id="gitalk-container" class="gitalk-container"></div>
<link rel="stylesheet" href='https://shiroimon.kithub.f5.si/css/gitalk.css'>
<script src='https://shiroimon.kithub.f5.si/js/gitalk.min.js'></script>
<script>
  const gitalk = new Gitalk({
    clientID: 'Ov23limCcfAvRdvUJ1de',
    clientSecret: '08c9365618f3a7434fe608970e757bba3d2369bc',
    repo: 'todayilearned',
    owner: 'shiroimon',
    admin: ["shiroimon"],
    labels: ["gitalk"],
    perPage:  10 ,
    pagerDirection: 'last',
    createIssueManually:  false ,
    distractionFreeMode:  false ,
    id: '1b14aa07a76c6985a71a0c3f86e49b4d'
  });
  gitalk.render('gitalk-container');
</script>



</div>

  <div class="footer container-xl width-full p-responsive">
  <div
    class="position-relative d-flex flex-row-reverse flex-lg-row flex-wrap flex-lg-nowrap flex-justify-center flex-lg-justify-between flex-sm-items-center pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light ">
    <a aria-label="Homepage" title="GitHub" class="footer-octicon d-none d-lg-block mr-lg-4" href="https://shiroimon.kithub.f5.si/">
      <svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="24">
        <path fill-rule="evenodd"
          d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
        </path>
      </svg>
    </a>
    <ul class="list-style-none d-flex flex-wrap col-12 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0">
      
      <li class="mr-3 mr-lg-0">Theme by <a href='https://github.com/MeiK2333/github-style'>github-style</a></li>
      
      <li class="mr-3 mr-lg-0">GitHub and the Invertocat logo are trademarks of <a href="https://github.com/">GitHub, Inc.</a></li>
    </ul>
  </div>
  <div class="d-flex flex-justify-center pb-6">
    <span class="f6 text-gray-light"></span>
  </div>


</div>

</body>

<script type="application/javascript" src="https://shiroimon.kithub.f5.si/js/github-style.js"></script>





<script src="https://cdn.jsdelivr.net/npm/fuse.js/dist/fuse.min.js"></script>
<script type="application/javascript" src='https://shiroimon.kithub.f5.si/js/search.js'></script>



</html>